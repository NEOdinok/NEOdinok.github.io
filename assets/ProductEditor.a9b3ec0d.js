import{t as $e,v as W,x as qe,y as Ie,z as ee,A as oe,C as ce,E as G,D as re,r as N,a as C,w as j,i as Z,h as w,ay as we,bx as Ve,b as ue,S as ke,by as De,c as se,bz as Ne,be as Ae,o as ne,l as xe,bA as de,p as Te,q as ze,T as Oe,bB as Ee,f as L,I as je,s as Me,b7 as Ue,bf as Be,b8 as Qe,ba as Le,bg as Re,bC as We,bh as ve,bD as Ke,b9 as Xe,B as Ye,a4 as Ce,a7 as B,ag as J,ab as E,bE as He,a9 as K,Q as _e,aJ as Je,a8 as X,ae as Q,aL as te,aM as D,al as ie,ai as Ge,ah as Ze}from"./index.fe5df578.js";import{c as et,a as Pe,b as Se,u as tt,Q as me}from"./QSelect.fab3c088.js";import{g as fe,s as pe}from"./touch.3df10340.js";import{c as at,h as nt}from"./format.40ec3e95.js";import{Q as lt}from"./QForm.7b19a9ef.js";import{u as ot,r as Y,i as ge,m as ye}from"./index.868c2785.js";function rt(e){const l=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((f,h)=>{const o=parseFloat(f);o&&(l[h]=o)}),l}var it=$e({name:"touch-swipe",beforeMount(e,{value:l,arg:f,modifiers:h}){if(h.mouse!==!0&&W.has.touch!==!0)return;const o=h.mouseCapture===!0?"Capture":"",t={handler:l,sensitivity:rt(f),direction:fe(h),noop:qe,mouseStart(u){pe(u,t)&&Ie(u)&&(ee(t,"temp",[[document,"mousemove","move",`notPassive${o}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(u,!0))},touchStart(u){if(pe(u,t)){const m=u.target;ee(t,"temp",[[m,"touchmove","move","notPassiveCapture"],[m,"touchcancel","end","notPassiveCapture"],[m,"touchend","end","notPassiveCapture"]]),t.start(u)}},start(u,m){W.is.firefox===!0&&oe(e,!0);const S=ce(u);t.event={x:S.left,y:S.top,time:Date.now(),mouse:m===!0,dir:!1}},move(u){if(t.event===void 0)return;if(t.event.dir!==!1){G(u);return}const m=Date.now()-t.event.time;if(m===0)return;const S=ce(u),F=S.left-t.event.x,y=Math.abs(F),I=S.top-t.event.y,_=Math.abs(I);if(t.event.mouse!==!0){if(y<t.sensitivity[1]&&_<t.sensitivity[1]){t.end(u);return}}else if(window.getSelection().toString()!==""){t.end(u);return}else if(y<t.sensitivity[2]&&_<t.sensitivity[2])return;const q=y/m,k=_/m;t.direction.vertical===!0&&y<_&&y<100&&k>t.sensitivity[0]&&(t.event.dir=I<0?"up":"down"),t.direction.horizontal===!0&&y>_&&_<100&&q>t.sensitivity[0]&&(t.event.dir=F<0?"left":"right"),t.direction.up===!0&&y<_&&I<0&&y<100&&k>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&y<_&&I>0&&y<100&&k>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&y>_&&F<0&&_<100&&q>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&y>_&&F>0&&_<100&&q>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(G(u),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),at(),t.styleCleanup=P=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const $=()=>{document.body.classList.remove("no-pointer-events--children")};P===!0?setTimeout($,50):$()}),t.handler({evt:u,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:m,distance:{x:y,y:_}})):t.end(u)},end(u){t.event!==void 0&&(re(t,"temp"),W.is.firefox===!0&&oe(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),u!==void 0&&t.event.dir!==!1&&G(u),t.event=void 0)}};if(e.__qtouchswipe=t,h.mouse===!0){const u=h.mouseCapture===!0||h.mousecapture===!0?"Capture":"";ee(t,"main",[[e,"mousedown","mouseStart",`passive${u}`]])}W.has.touch===!0&&ee(t,"main",[[e,"touchstart","touchStart",`passive${h.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,l){const f=e.__qtouchswipe;f!==void 0&&(l.oldValue!==l.value&&(typeof l.value!="function"&&f.end(),f.handler=l.value),f.direction=fe(l.modifiers))},beforeUnmount(e){const l=e.__qtouchswipe;l!==void 0&&(re(l,"main"),re(l,"temp"),W.is.firefox===!0&&oe(e,!1),l.styleCleanup!==void 0&&l.styleCleanup(),delete e.__qtouchswipe)}});function ut(){const e=new Map;return{getCache:function(l,f){return e[l]===void 0?e[l]=f:e[l]},getCacheWithFn:function(l,f){return e[l]===void 0?e[l]=f():e[l]}}}const st={name:{required:!0},disable:Boolean},be={setup(e,{slots:l}){return()=>w("div",{class:"q-panel scroll",role:"tabpanel"},ue(l.default))}},ct={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},dt=["update:modelValue","beforeTransition","transition"];function vt(){const{props:e,emit:l,proxy:f}=Z(),{getCacheWithFn:h}=ut();let o,t;const u=N(null),m=N(null);function S(i){const n=e.vertical===!0?"up":"left";c((f.$q.lang.rtl===!0?-1:1)*(i.direction===n?1:-1))}const F=C(()=>[[it,S,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),y=C(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),I=C(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),_=C(()=>`--q-transition-duration: ${e.transitionDuration}ms`),q=C(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),k=C(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),P=C(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);j(()=>e.modelValue,(i,n)=>{const a=v(i)===!0?V(i):-1;t!==!0&&p(a===-1?0:a<V(n)?-1:1),u.value!==a&&(u.value=a,l("beforeTransition",i,n),ke(()=>{l("transition",i,n)}))});function $(){c(1)}function T(){c(-1)}function r(i){l("update:modelValue",i)}function v(i){return i!=null&&i!==""}function V(i){return o.findIndex(n=>n.props.name===i&&n.props.disable!==""&&n.props.disable!==!0)}function b(){return o.filter(i=>i.props.disable!==""&&i.props.disable!==!0)}function p(i){const n=i!==0&&e.animated===!0&&u.value!==-1?"q-transition--"+(i===-1?y.value:I.value):null;m.value!==n&&(m.value=n)}function c(i,n=u.value){let a=n+i;for(;a>-1&&a<o.length;){const s=o[a];if(s!==void 0&&s.props.disable!==""&&s.props.disable!==!0){p(i),t=!0,l("update:modelValue",s.props.name),setTimeout(()=>{t=!1});return}a+=i}e.infinite===!0&&o.length!==0&&n!==-1&&n!==o.length&&c(i,i===-1?o.length:-1)}function A(){const i=V(e.modelValue);return u.value!==i&&(u.value=i),!0}function x(){const i=v(e.modelValue)===!0&&A()&&o[u.value];return e.keepAlive===!0?[w(De,k.value,[w(P.value===!0?h(q.value,()=>({...be,name:q.value})):be,{key:q.value,style:_.value},()=>i)])]:[w("div",{class:"q-panel scroll",style:_.value,key:q.value,role:"tabpanel"},[i])]}function g(){if(o.length!==0)return e.animated===!0?[w(we,{name:m.value},x)]:x()}function z(i){return o=Ve(ue(i.default,[])).filter(n=>n.props!==null&&n.props.slot===void 0&&v(n.props.name)===!0),o.length}function M(){return o}return Object.assign(f,{next:$,previous:T,goTo:r}),{panelIndex:u,panelDirectives:F,updatePanelsList:z,updatePanelIndex:A,getPanelContent:g,getEnabledPanels:b,getPanels:M,isValidPanelName:v,keepAliveProps:k,needsUniqueKeepAliveWrapper:P,goToPanelByOffset:c,goToPanel:r,nextPanel:$,previousPanel:T}}var he=se({name:"QCarouselSlide",props:{...st,imgSrc:String},setup(e,{slots:l}){const f=C(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>w("div",{class:"q-carousel__slide",style:f.value},ue(l.default))}});let H=0;const mt={fullscreen:Boolean,noRouteFullscreenExit:Boolean},ft=["update:fullscreen","fullscreen"];function pt(){const e=Z(),{props:l,emit:f,proxy:h}=e;let o,t,u;const m=N(!1);Ne(e)===!0&&j(()=>h.$route.fullPath,()=>{l.noRouteFullscreenExit!==!0&&y()}),j(()=>l.fullscreen,I=>{m.value!==I&&S()}),j(m,I=>{f("update:fullscreen",I),f("fullscreen",I)});function S(){m.value===!0?y():F()}function F(){m.value!==!0&&(m.value=!0,u=h.$el.parentNode,u.replaceChild(t,h.$el),document.body.appendChild(h.$el),H++,H===1&&document.body.classList.add("q-body--fullscreen-mixin"),o={handler:y},de.add(o))}function y(){m.value===!0&&(o!==void 0&&(de.remove(o),o=void 0),u.replaceChild(h.$el,t),m.value=!1,H=Math.max(0,H-1),H===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),h.$el.scrollIntoView!==void 0&&setTimeout(()=>{h.$el.scrollIntoView()})))}return Ae(()=>{t=document.createElement("span")}),ne(()=>{l.fullscreen===!0&&F()}),xe(y),Object.assign(h,{toggleFullscreen:S,setFullscreen:F,exitFullscreen:y}),{inFullscreen:m,toggleFullscreen:S}}const gt=["top","right","bottom","left"],yt=["regular","flat","outline","push","unelevated"];var bt=se({name:"QCarousel",props:{...Te,...ct,...mt,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>yt.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>gt.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...ft,...dt],setup(e,{slots:l}){const{proxy:{$q:f}}=Z(),h=ze(e,f);let o=null,t;const{updatePanelsList:u,getPanelContent:m,panelDirectives:S,goToPanel:F,previousPanel:y,nextPanel:I,getEnabledPanels:_,panelIndex:q}=vt(),{inFullscreen:k}=pt(),P=C(()=>k.value!==!0&&e.height!==void 0?{height:e.height}:{}),$=C(()=>e.vertical===!0?"vertical":"horizontal"),T=C(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(k.value===!0?" fullscreen":"")+(h.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${$.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${b.value}`:"")),r=C(()=>{const g=[e.prevIcon||f.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||f.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&f.lang.rtl===!0?g.reverse():g}),v=C(()=>e.navigationIcon||f.iconSet.carousel.navigationIcon),V=C(()=>e.navigationActiveIcon||v.value),b=C(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),p=C(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));j(()=>e.modelValue,()=>{e.autoplay&&c()}),j(()=>e.autoplay,g=>{g?c():o!==null&&(clearTimeout(o),o=null)});function c(){const g=Ee(e.autoplay)===!0?Math.abs(e.autoplay):5e3;o!==null&&clearTimeout(o),o=setTimeout(()=>{o=null,g>=0?I():y()},g)}ne(()=>{e.autoplay&&c()}),xe(()=>{o!==null&&clearTimeout(o)});function A(g,z){return w("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${g} q-carousel__navigation--${b.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[w("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},_().map(z))])}function x(){const g=[];if(e.navigation===!0){const z=l["navigation-icon"]!==void 0?l["navigation-icon"]:i=>w(L,{key:"nav"+i.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${i.active===!0?"":"in"}active`,...i.btnProps,onClick:i.onClick}),M=t-1;g.push(A("buttons",(i,n)=>{const a=i.props.name,s=q.value===n;return z({index:n,maxIndex:M,name:a,active:s,btnProps:{icon:s===!0?V.value:v.value,size:"sm",...p.value},onClick:()=>{F(a)}})}))}else if(e.thumbnails===!0){const z=e.controlColor!==void 0?` text-${e.controlColor}`:"";g.push(A("thumbnails",M=>{const i=M.props;return w("img",{key:"tmb#"+i.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${i.name===e.modelValue?"":"in"}active`+z,src:i.imgSrc||i["img-src"],onClick:()=>{F(i.name)}})}))}return e.arrows===!0&&q.value>=0&&((e.infinite===!0||q.value>0)&&g.push(w("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${$.value} absolute flex flex-center`},[w(L,{icon:r.value[0],...p.value,onClick:y})])),(e.infinite===!0||q.value<t-1)&&g.push(w("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${$.value} absolute flex flex-center`},[w(L,{icon:r.value[1],...p.value,onClick:I})]))),je(l.control,g)}return()=>(t=u(l),w("div",{class:T.value,style:P.value},[Oe("div",{class:"q-carousel__slides-container"},m(),"sl-cont",e.swipeable,()=>S.value)].concat(x())))}});function R(e,l,f,h){const o=[];return e.forEach(t=>{h(t)===!0?o.push(t):l.push({failedPropValidation:f,file:t})}),o}function ae(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),G(e)}const ht={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},xt=["rejected"];function Ct({editable:e,dnd:l,getFileInput:f,addFilesToQueue:h}){const{props:o,emit:t,proxy:u}=Z(),m=N(null),S=C(()=>o.accept!==void 0?o.accept.split(",").map(r=>(r=r.trim(),r==="*"?"*/":(r.endsWith("/*")&&(r=r.slice(0,r.length-1)),r.toUpperCase()))):null),F=C(()=>parseInt(o.maxFiles,10)),y=C(()=>parseInt(o.maxTotalSize,10));function I(r){if(e.value)if(r!==Object(r)&&(r={target:null}),r.target!==null&&r.target.matches('input[type="file"]')===!0)r.clientX===0&&r.clientY===0&&Me(r);else{const v=f();v&&v!==r.target&&v.click(r)}}function _(r){e.value&&r&&h(null,r)}function q(r,v,V,b){let p=Array.from(v||r.target.files);const c=[],A=()=>{c.length!==0&&t("rejected",c)};if(o.accept!==void 0&&S.value.indexOf("*/")===-1&&(p=R(p,c,"accept",x=>S.value.some(g=>x.type.toUpperCase().startsWith(g)||x.name.toUpperCase().endsWith(g))),p.length===0))return A();if(o.maxFileSize!==void 0){const x=parseInt(o.maxFileSize,10);if(p=R(p,c,"max-file-size",g=>g.size<=x),p.length===0)return A()}if(o.multiple!==!0&&p.length!==0&&(p=[p[0]]),p.forEach(x=>{x.__key=x.webkitRelativePath+x.lastModified+x.name+x.size}),b===!0){const x=V.map(g=>g.__key);p=R(p,c,"duplicate",g=>x.includes(g.__key)===!1)}if(p.length===0)return A();if(o.maxTotalSize!==void 0){let x=b===!0?V.reduce((g,z)=>g+z.size,0):0;if(p=R(p,c,"max-total-size",g=>(x+=g.size,x<=y.value)),p.length===0)return A()}if(typeof o.filter=="function"){const x=o.filter(p);p=R(p,c,"filter",g=>x.includes(g))}if(o.maxFiles!==void 0){let x=b===!0?V.length:0;if(p=R(p,c,"max-files",()=>(x++,x<=F.value)),p.length===0)return A()}if(A(),p.length!==0)return p}function k(r){ae(r),l.value!==!0&&(l.value=!0)}function P(r){G(r),(r.relatedTarget!==null||W.is.safari!==!0?r.relatedTarget!==m.value:document.elementsFromPoint(r.clientX,r.clientY).includes(m.value)===!1)===!0&&(l.value=!1)}function $(r){ae(r);const v=r.dataTransfer.files;v.length!==0&&h(null,v),l.value=!1}function T(r){if(l.value===!0)return w("div",{ref:m,class:`q-${r}__dnd absolute-full`,onDragenter:ae,onDragover:ae,onDragleave:P,onDrop:$})}return Object.assign(u,{pickFiles:I,addFiles:_}),{pickFiles:I,addFiles:_,onDragover:k,onDragleave:P,processFiles:q,getDndNode:T,maxFilesNumber:F,maxTotalSizeNumber:y}}var _t=se({name:"QFile",inheritAttrs:!1,props:{...Ue,...Be,...ht,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Qe,...xt],setup(e,{slots:l,emit:f,attrs:h}){const{proxy:o}=Z(),t=Le(),u=N(null),m=N(!1),S=Re(e),{pickFiles:F,onDragover:y,onDragleave:I,processFiles:_,getDndNode:q}=Ct({editable:t.editable,dnd:m,getFileInput:M,addFilesToQueue:i}),k=We(e),P=C(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),$=C(()=>ve(P.value)),T=C(()=>P.value.map(d=>d.name).join(", ")),r=C(()=>nt(P.value.reduce((d,O)=>d+O.size,0))),v=C(()=>({totalSize:r.value,filesNumber:P.value.length,maxFiles:e.maxFiles})),V=C(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:S.value,...h,id:t.targetUid.value,disabled:t.editable.value!==!0})),b=C(()=>"q-file q-field--auto-height"+(m.value===!0?" q-file--dnd":"")),p=C(()=>e.multiple===!0&&e.append===!0);function c(d){const O=P.value.slice();O.splice(d,1),x(O)}function A(d){const O=P.value.indexOf(d);O>-1&&c(O)}function x(d){f("update:modelValue",e.multiple===!0?d:d[0])}function g(d){d.keyCode===13&&Ye(d)}function z(d){(d.keyCode===13||d.keyCode===32)&&F(d)}function M(){return u.value}function i(d,O){const U=_(d,O,P.value,p.value),le=M();le!=null&&(le.value=""),U!==void 0&&((e.multiple===!0?e.modelValue&&U.every(Fe=>P.value.includes(Fe)):e.modelValue===U[0])||x(p.value===!0?P.value.concat(U):U))}function n(){return[w("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function a(){if(l.file!==void 0)return P.value.length===0?n():P.value.map((O,U)=>l.file({index:U,file:O,ref:this}));if(l.selected!==void 0)return P.value.length===0?n():l.selected({files:P.value,ref:this});if(e.useChips===!0)return P.value.length===0?n():P.value.map((O,U)=>w(et,{key:"file-"+U,removable:t.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{c(U)}},()=>w("span",{class:"ellipsis",textContent:O.name})));const d=e.displayValue!==void 0?e.displayValue:T.value;return d.length!==0?[w("div",{class:e.inputClass,style:e.inputStyle,textContent:d})]:n()}function s(){const d={ref:u,...V.value,...k.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:i};return e.multiple===!0&&(d.multiple=!0),w("input",d)}return Object.assign(t,{fieldClass:b,emitValue:x,hasValue:$,inputRef:u,innerValue:P,floatingLabel:C(()=>$.value===!0||ve(e.displayValue)),computedCounter:C(()=>{if(e.counterLabel!==void 0)return e.counterLabel(v.value);const d=e.maxFiles;return`${P.value.length}${d!==void 0?" / "+d:""} (${r.value})`}),getControlChild:()=>q("file"),getControl:()=>{const d={ref:t.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return t.editable.value===!0&&Object.assign(d,{onDragover:y,onDragleave:I,onKeydown:g,onKeyup:z}),w("div",d,[s()].concat(a()))}}),Object.assign(o,{removeAtIndex:c,removeFile:A,getNativeElement:()=>u.value}),Ke(o,"nativeEl",()=>u.value),Xe(t)}});const Pt={class:""},St={__name:"FirebaseUpload",emits:["onImagesUploaded"],setup(e,{emit:l}){Ce();const{triggerSpinner:f}=Pe(),{uploadImagesToFirebaseStorage:h}=Se(),o=N([]),t=N(null),u=C(()=>t.value!==null),m=async()=>{try{const S=f("loading images...");o.value=[],o.value=await h(t.value),o.value&&S(),l("onImagesUploaded",o.value),t.value=null}catch(S){console.warn({error:S})}};return(S,F)=>(B(),J("div",Pt,[E(_t,{modelValue:t.value,"onUpdate:modelValue":F[0]||(F[0]=y=>t.value=y),label:"Add images to upload",class:"q-pt-md",accept:".jpg, image/*",outlined:"",counter:"",clearable:"",multiple:"",append:"","use-chips":""},He({prepend:K(()=>[E(_e,{name:"attach_file"})]),_:2},[u.value?{name:"after",fn:K(()=>[E(L,{color:"green",rounded:"",dense:"",icon:"cloud_upload",disable:!u.value,onClick:m},null,8,["disable"])]),key:"0"}:void 0]),1032,["modelValue"])]))}};const Ft={class:"row justify-center"},$t={class:"col-12 col-sm-6 col-md-4"},qt={class:"q-pa-md"},It={key:1},wt={class:"col-12 col-sm-6 col-md-4"},Vt={class:"q-pa-md"},kt={key:0,class:"custom-caption absolute-top"},Dt=Q("div",{class:"text-h2"},"Main Image",-1),Nt=[Dt],At=Q("div",{class:"q-mt-md text-center"}," Add product images below ",-1),Tt={key:0,class:"row q-gutter-sm q-pt-md"},Bt={__name:"ProductEditor",props:{productId:{type:String,required:!1}},setup(e){const l=e;Ce();const{getCategoryDocsFromFirebase:f,getSubcategoryDocsFromFirebase:h,createProductInFirebase:o}=tt(),{updateMainImageInFirebase:t,removeImageFromFirebaseStorage:u}=Se(),{triggerNegative:m,triggerPositive:S}=Pe(),F=N([]),y=N([]),I=N([]),_=N([]),q=N(null),k=N(null),P=N(""),$=N("blank"),T=N(null),r=N(!1),v=N([]),V=N([]),b=Je({productName:"",productPrice:"",productQuantity:"",productCategory:"",productSubCategory:"",productDescription:""}),p={productName:{required:Y,$lazy:!0},productPrice:{required:Y,integer:ge,minValue:ye(1),$lazy:!0},productQuantity:{required:Y,integer:ge,minValue:ye(1),$lazy:!0},productCategory:{required:Y,$lazy:!0},productSubCategory:{$lazy:!1},productDescription:{required:Y,$lazy:!0}},c=ot(p,b);ne(()=>{console.warn(l.productId)});const A=async()=>{try{if(!await D(c).$validate())m("Fill in all the fields");else if(v.value.length==0)m("Please upload product images");else if(!T.value)m("Please select a main image");else{const a={name:b.productName,price:b.productPrice,quantity:b.productQuantity,category:q.value,subCategory:k.value,description:b.productDescription,imagesData:v.value,imageUrls:V.value};await o(a),S(`Product ${a.name} created`),i()}}catch(n){console.warn({error:n})}};j($,n=>{const a=v.value.find(s=>s.url==n);a&&a.isMain=="true"?r.value=!0:r.value=!1}),ne(async()=>{try{const{categoriesData:n}=await f();F.value=n.value}catch(n){console.warn({error:n})}}),j(F,()=>{y.value=F.value.map(n=>({label:n.categoryName,value:n.categoryId}))}),j(k,n=>{try{if(n)b.productSubCategory=n;else{b.productSubCategory="";return}}catch(a){console.warn({error:a})}b.productSubCategory=n}),j(q,async n=>{try{if(n)b.productCategory=n;else{b.productCategory="",_.value=[];return}_.value=[],k.value="";const{subcategoriesData:a}=await h(n);I.value=a.value}catch(a){console.error({error:a})}}),j(I,n=>{_.value=n.map(a=>({label:a.subCategoryName,value:a.subCategoryId}))});const x=async()=>{const n=[];v.value.forEach(d=>{d.url!=$.value&&n.push(d)});let a=v.value.find(d=>d.url==$.value),s=v.value.indexOf(a);await u(a),v.value=n,V.value=[],v.value.forEach(d=>{V.value.push(d.url)}),s==0?$.value=v.value[0].url:$.value=v.value[s-1].url},g=async()=>{z();let n=v.value.find(d=>d.url==$.value),a=v.value.indexOf(n),s=await t(T.value,n);v.value[a]=s,r.value=!0,T.value=s},z=()=>{let n=v.value.find(a=>a.isMain=="true");if(n){n.isMain=!1;let a=v.value.indexOf(n);v.value[a]=n}},M=n=>{n.forEach(s=>{v.value.push(s),V.value.push(s.url)}),$.value=v.value[0].url;let a=v.value.find(s=>s.isMain==!0);a&&(T.value=a)},i=()=>{b.productName="",b.productPrice="",b.productQuantity="",b.productCategory="",b.productSubCategory="",b.productDescription="",q.value=null,k.value=null,$.value="blank",T.value=null,r.value=!1,v.value=[],V.value=[],D(c).$reset()};return(n,a)=>(B(),X(lt,{ref_key:"createProductForm",ref:P,onSubmit:A},{default:K(()=>[Q("div",Ft,[Q("div",$t,[Q("div",qt,[E(te,{outlined:"",label:"Product name",class:"q-pb-lg",modelValue:b.productName,"onUpdate:modelValue":a[0]||(a[0]=s=>b.productName=s),"error-message":"Product name is required","bottom-slots":"",error:D(c).productName.$invalid&&D(c).productName.$dirty,"onUpdate:model":a[1]||(a[1]=s=>D(c).productName.$touch())},null,8,["modelValue","error"]),E(te,{outlined:"",label:"Product price",class:"q-pb-lg",modelValue:b.productPrice,"onUpdate:modelValue":[a[2]||(a[2]=s=>b.productPrice=s),a[3]||(a[3]=s=>D(c).productPrice.$touch())],"error-message":"Please enter valid price","bottom-slots":"",error:D(c).productPrice.$invalid&&D(c).productPrice.$dirty},null,8,["modelValue","error"]),E(te,{class:"q-pb-lg",label:"Product quantity",modelValue:b.productQuantity,"onUpdate:modelValue":[a[4]||(a[4]=s=>b.productQuantity=s),a[5]||(a[5]=s=>D(c).productQuantity.$touch())],"error-message":"Please enter valid quantity",outlined:"","bottom-slots":"",error:D(c).productQuantity.$invalid&&D(c).productQuantity.$dirty},null,8,["modelValue","error"]),y.value.length?(B(),X(me,{key:0,outlined:"",label:"Parent category",class:"q-pb-lg","error-message":"Please select a parent category",options:y.value,modelValue:q.value,"onUpdate:modelValue":[a[6]||(a[6]=s=>q.value=s),a[7]||(a[7]=s=>D(c).productCategory.$touch())],error:D(c).productCategory.$invalid&&D(c).productCategory.$dirty},null,8,["options","modelValue","error"])):(B(),J("p",It,"No product categories")),_.value.length?(B(),X(me,{key:2,outlined:"",label:"Product Subcategory",class:"q-pb-lg",modelValue:k.value,"onUpdate:modelValue":[a[8]||(a[8]=s=>k.value=s),a[9]||(a[9]=s=>D(c).productSubCategory.$touch())],options:_.value,"error-message":"Please select a subcategory",error:D(c).productSubCategory.$invalid&&D(c).productSubCategory.$dirty},null,8,["modelValue","options","error"])):ie("",!0),E(te,{filled:"",clearable:"",autogrow:"",type:"textarea",color:"primary",label:"Product Description",modelValue:b.productDescription,"onUpdate:modelValue":[a[10]||(a[10]=s=>b.productDescription=s),a[11]||(a[11]=s=>D(c).productDescription.$touch())],"error-message":"Please enter product description",error:D(c).productDescription.$invalid&&D(c).productDescription.$dirty},null,8,["modelValue","error"])])]),Q("div",wt,[Q("div",Vt,[E(bt,{modelValue:$.value,"onUpdate:modelValue":a[12]||(a[12]=s=>$.value=s),"transition-prev":"jump-right","transition-next":"jump-left",animated:"","control-color":"white","prev-icon":"arrow_left","next-icon":"arrow_right",thumbnails:V.value.length!=0,infinite:"",height:"300px",class:"bg-primary text-white shadow-1 rounded-borders"},{default:K(()=>[V.value.length!=0?(B(!0),J(Ge,{key:0},Ze(V.value,(s,d)=>(B(),X(he,{name:s,"img-src":s},{default:K(()=>[r.value?(B(),J("div",kt,Nt)):ie("",!0)]),_:2},1032,["name","img-src"]))),256)):(B(),X(he,{key:1,name:"blank",class:"column no-wrap flex-center"},{default:K(()=>[E(_e,{name:"image",size:"56px"}),At]),_:1}))]),_:1},8,["modelValue","thumbnails"]),V.value.length!=0?(B(),J("div",Tt,[E(L,{unelevated:"",rounded:"",align:"between","icon-right":"delete",color:"primary",label:"Remove",onClick:x}),E(L,{unelevated:"",rounded:"",align:"between","icon-right":"image",color:"primary",label:"Set as main",onClick:g})])):ie("",!0),E(St,{onOnImagesUploaded:M}),E(L,{unelevated:"",rounded:"",align:"between","icon-right":"check",color:"primary",label:"create product",type:"submit"})])])])]),_:1},512))}};export{Bt as _};
