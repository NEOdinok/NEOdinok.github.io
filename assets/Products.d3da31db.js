import{Q as It,a as qt}from"./QForm.99edcc66.js";import{t as Ft,v as ae,x as At,y as $t,z as _e,A as Te,C as Qe,E as fe,D as Ue,r as A,a as P,w as j,i as me,h as F,ay as Ot,bk as Dt,b as Oe,S as Nt,bl as Mt,c as De,bm as Bt,b4 as zt,o as Ne,k as ut,bn as Xe,p as Vt,q as Lt,T as jt,bo as Ht,f as ee,I as Qt,s as Xt,aZ as Wt,b5 as Gt,a_ as Kt,b0 as Yt,b6 as Zt,bp as Jt,b7 as We,bq as en,a$ as tn,B as nn,br as rn,bs as sn,bt as Ge,bu as on,bv as le,bw as an,bx as ln,by as un,bz as cn,bA as dn,bB as hn,a1 as fn,a2 as Me,a4 as L,ag as he,ab as N,bC as pn,aM as q,a6 as J,Q as ct,aJ as mn,a5 as ie,ae as Z,aL as ve,al as Ee,ai as gn,ah as _n}from"./index.a263a694.js";import{c as vn,a as dt,u as bn,b as yn,Q as Ke,r as ue,i as Ye,m as Ze}from"./index.esm.3f15bf5a.js";import{g as Je,s as et}from"./touch.70a9dd44.js";import{c as wn,h as kn}from"./format.738cc702.js";function Sn(e){const t=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((n,r)=>{const s=parseFloat(n);s&&(t[r]=s)}),t}var xn=Ft({name:"touch-swipe",beforeMount(e,{value:t,arg:n,modifiers:r}){if(r.mouse!==!0&&ae.has.touch!==!0)return;const s=r.mouseCapture===!0?"Capture":"",o={handler:t,sensitivity:Sn(n),direction:Je(r),noop:At,mouseStart(a){et(a,o)&&$t(a)&&(_e(o,"temp",[[document,"mousemove","move",`notPassive${s}`],[document,"mouseup","end","notPassiveCapture"]]),o.start(a,!0))},touchStart(a){if(et(a,o)){const i=a.target;_e(o,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","notPassiveCapture"],[i,"touchend","end","notPassiveCapture"]]),o.start(a)}},start(a,i){ae.is.firefox===!0&&Te(e,!0);const l=Qe(a);o.event={x:l.left,y:l.top,time:Date.now(),mouse:i===!0,dir:!1}},move(a){if(o.event===void 0)return;if(o.event.dir!==!1){fe(a);return}const i=Date.now()-o.event.time;if(i===0)return;const l=Qe(a),h=l.left-o.event.x,f=Math.abs(h),_=l.top-o.event.y,v=Math.abs(_);if(o.event.mouse!==!0){if(f<o.sensitivity[1]&&v<o.sensitivity[1]){o.end(a);return}}else if(f<o.sensitivity[2]&&v<o.sensitivity[2])return;const w=f/i,C=v/i;o.direction.vertical===!0&&f<v&&f<100&&C>o.sensitivity[0]&&(o.event.dir=_<0?"up":"down"),o.direction.horizontal===!0&&f>v&&v<100&&w>o.sensitivity[0]&&(o.event.dir=h<0?"left":"right"),o.direction.up===!0&&f<v&&_<0&&f<100&&C>o.sensitivity[0]&&(o.event.dir="up"),o.direction.down===!0&&f<v&&_>0&&f<100&&C>o.sensitivity[0]&&(o.event.dir="down"),o.direction.left===!0&&f>v&&h<0&&v<100&&w>o.sensitivity[0]&&(o.event.dir="left"),o.direction.right===!0&&f>v&&h>0&&v<100&&w>o.sensitivity[0]&&(o.event.dir="right"),o.event.dir!==!1?(fe(a),o.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),wn(),o.styleCleanup=g=>{o.styleCleanup=void 0,document.body.classList.remove("non-selectable");const k=()=>{document.body.classList.remove("no-pointer-events--children")};g===!0?setTimeout(k,50):k()}),o.handler({evt:a,touch:o.event.mouse!==!0,mouse:o.event.mouse,direction:o.event.dir,duration:i,distance:{x:f,y:v}})):o.end(a)},end(a){o.event!==void 0&&(Ue(o,"temp"),ae.is.firefox===!0&&Te(e,!1),o.styleCleanup!==void 0&&o.styleCleanup(!0),a!==void 0&&o.event.dir!==!1&&fe(a),o.event=void 0)}};if(e.__qtouchswipe=o,r.mouse===!0){const a=r.mouseCapture===!0||r.mousecapture===!0?"Capture":"";_e(o,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}ae.has.touch===!0&&_e(o,"main",[[e,"touchstart","touchStart",`passive${r.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchswipe;n!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&n.end(),n.handler=t.value),n.direction=Je(t.modifiers))},beforeUnmount(e){const t=e.__qtouchswipe;t!==void 0&&(Ue(t,"main"),Ue(t,"temp"),ae.is.firefox===!0&&Te(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchswipe)}});function Cn(){const e=new Map;return{getCache:function(t,n){return e[t]===void 0?e[t]=n:e[t]},getCacheWithFn:function(t,n){return e[t]===void 0?e[t]=n():e[t]}}}const Rn={name:{required:!0},disable:Boolean},tt={setup(e,{slots:t}){return()=>F("div",{class:"q-panel scroll",role:"tabpanel"},Oe(t.default))}},Pn={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},Tn=["update:modelValue","beforeTransition","transition"];function Un(){const{props:e,emit:t,proxy:n}=me(),{getCacheWithFn:r}=Cn();let s,o;const a=A(null),i=A(null);function l(u){const c=e.vertical===!0?"up":"left";T((n.$q.lang.rtl===!0?-1:1)*(u.direction===c?1:-1))}const h=P(()=>[[xn,l,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),f=P(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),_=P(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),v=P(()=>`--q-transition-duration: ${e.transitionDuration}ms`),w=P(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),C=P(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),g=P(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);j(()=>e.modelValue,(u,c)=>{const b=y(u)===!0?m(u):-1;o!==!0&&p(b===-1?0:b<m(c)?-1:1),a.value!==b&&(a.value=b,t("beforeTransition",u,c),Nt(()=>{t("transition",u,c)}))});function k(){T(1)}function U(){T(-1)}function d(u){t("update:modelValue",u)}function y(u){return u!=null&&u!==""}function m(u){return s.findIndex(c=>c.props.name===u&&c.props.disable!==""&&c.props.disable!==!0)}function $(){return s.filter(u=>u.props.disable!==""&&u.props.disable!==!0)}function p(u){const c=u!==0&&e.animated===!0&&a.value!==-1?"q-transition--"+(u===-1?f.value:_.value):null;i.value!==c&&(i.value=c)}function T(u,c=a.value){let b=c+u;for(;b>-1&&b<s.length;){const O=s[b];if(O!==void 0&&O.props.disable!==""&&O.props.disable!==!0){p(u),o=!0,t("update:modelValue",O.props.name),setTimeout(()=>{o=!1});return}b+=u}e.infinite===!0&&s.length>0&&c!==-1&&c!==s.length&&T(u,u===-1?s.length:-1)}function I(){const u=m(e.modelValue);return a.value!==u&&(a.value=u),!0}function x(){const u=y(e.modelValue)===!0&&I()&&s[a.value];return e.keepAlive===!0?[F(Mt,C.value,[F(g.value===!0?r(w.value,()=>({...tt,name:w.value})):tt,{key:w.value,style:v.value},()=>u)])]:[F("div",{class:"q-panel scroll",style:v.value,key:w.value,role:"tabpanel"},[u])]}function S(){if(s.length!==0)return e.animated===!0?[F(Ot,{name:i.value},x)]:x()}function B(u){return s=Dt(Oe(u.default,[])).filter(c=>c.props!==null&&c.props.slot===void 0&&y(c.props.name)===!0),s.length}function H(){return s}return Object.assign(n,{next:k,previous:U,goTo:d}),{panelIndex:a,panelDirectives:h,updatePanelsList:B,updatePanelIndex:I,getPanelContent:S,getEnabledPanels:$,getPanels:H,isValidPanelName:y,keepAliveProps:C,needsUniqueKeepAliveWrapper:g,goToPanelByOffset:T,goToPanel:d,nextPanel:k,previousPanel:U}}var nt=De({name:"QCarouselSlide",props:{...Rn,imgSrc:String},setup(e,{slots:t}){const n=P(()=>e.imgSrc?{backgroundImage:`url("${e.imgSrc}")`}:{});return()=>F("div",{class:"q-carousel__slide",style:n.value},Oe(t.default))}});let ce=0;const En={fullscreen:Boolean,noRouteFullscreenExit:Boolean},In=["update:fullscreen","fullscreen"];function qn(){const e=me(),{props:t,emit:n,proxy:r}=e;let s,o,a;const i=A(!1);Bt(e)===!0&&j(()=>r.$route.fullPath,()=>{t.noRouteFullscreenExit!==!0&&f()}),j(()=>t.fullscreen,_=>{i.value!==_&&l()}),j(i,_=>{n("update:fullscreen",_),n("fullscreen",_)});function l(){i.value===!0?f():h()}function h(){i.value!==!0&&(i.value=!0,a=r.$el.parentNode,a.replaceChild(o,r.$el),document.body.appendChild(r.$el),ce++,ce===1&&document.body.classList.add("q-body--fullscreen-mixin"),s={handler:f},Xe.add(s))}function f(){i.value===!0&&(s!==void 0&&(Xe.remove(s),s=void 0),a.replaceChild(r.$el,o),i.value=!1,ce=Math.max(0,ce-1),ce===0&&(document.body.classList.remove("q-body--fullscreen-mixin"),r.$el.scrollIntoView!==void 0&&setTimeout(()=>{r.$el.scrollIntoView()})))}return zt(()=>{o=document.createElement("span")}),Ne(()=>{t.fullscreen===!0&&h()}),ut(f),Object.assign(r,{toggleFullscreen:l,setFullscreen:h,exitFullscreen:f}),{inFullscreen:i,toggleFullscreen:l}}const Fn=["top","right","bottom","left"],An=["regular","flat","outline","push","unelevated"];var $n=De({name:"QCarousel",props:{...Vt,...Pn,...En,transitionPrev:{type:String,default:"fade"},transitionNext:{type:String,default:"fade"},height:String,padding:Boolean,controlColor:String,controlTextColor:String,controlType:{type:String,validator:e=>An.includes(e),default:"flat"},autoplay:[Number,Boolean],arrows:Boolean,prevIcon:String,nextIcon:String,navigation:Boolean,navigationPosition:{type:String,validator:e=>Fn.includes(e)},navigationIcon:String,navigationActiveIcon:String,thumbnails:Boolean},emits:[...In,...Tn],setup(e,{slots:t}){const{proxy:{$q:n}}=me(),r=Lt(e,n);let s=null,o;const{updatePanelsList:a,getPanelContent:i,panelDirectives:l,goToPanel:h,previousPanel:f,nextPanel:_,getEnabledPanels:v,panelIndex:w}=Un(),{inFullscreen:C}=qn(),g=P(()=>C.value!==!0&&e.height!==void 0?{height:e.height}:{}),k=P(()=>e.vertical===!0?"vertical":"horizontal"),U=P(()=>`q-carousel q-panel-parent q-carousel--with${e.padding===!0?"":"out"}-padding`+(C.value===!0?" fullscreen":"")+(r.value===!0?" q-carousel--dark q-dark":"")+(e.arrows===!0?` q-carousel--arrows-${k.value}`:"")+(e.navigation===!0?` q-carousel--navigation-${$.value}`:"")),d=P(()=>{const S=[e.prevIcon||n.iconSet.carousel[e.vertical===!0?"up":"left"],e.nextIcon||n.iconSet.carousel[e.vertical===!0?"down":"right"]];return e.vertical===!1&&n.lang.rtl===!0?S.reverse():S}),y=P(()=>e.navigationIcon||n.iconSet.carousel.navigationIcon),m=P(()=>e.navigationActiveIcon||y.value),$=P(()=>e.navigationPosition||(e.vertical===!0?"right":"bottom")),p=P(()=>({color:e.controlColor,textColor:e.controlTextColor,round:!0,[e.controlType]:!0,dense:!0}));j(()=>e.modelValue,()=>{e.autoplay&&T()}),j(()=>e.autoplay,S=>{S?T():s!==null&&(clearTimeout(s),s=null)});function T(){const S=Ht(e.autoplay)===!0?Math.abs(e.autoplay):5e3;s!==null&&clearTimeout(s),s=setTimeout(()=>{s=null,S>=0?_():f()},S)}Ne(()=>{e.autoplay&&T()}),ut(()=>{s!==null&&clearTimeout(s)});function I(S,B){return F("div",{class:`q-carousel__control q-carousel__navigation no-wrap absolute flex q-carousel__navigation--${S} q-carousel__navigation--${$.value}`+(e.controlColor!==void 0?` text-${e.controlColor}`:"")},[F("div",{class:"q-carousel__navigation-inner flex flex-center no-wrap"},v().map(B))])}function x(){const S=[];if(e.navigation===!0){const B=t["navigation-icon"]!==void 0?t["navigation-icon"]:u=>F(ee,{key:"nav"+u.name,class:`q-carousel__navigation-icon q-carousel__navigation-icon--${u.active===!0?"":"in"}active`,...u.btnProps,onClick:u.onClick}),H=o-1;S.push(I("buttons",(u,c)=>{const b=u.props.name,O=w.value===c;return B({index:c,maxIndex:H,name:b,active:O,btnProps:{icon:O===!0?m.value:y.value,size:"sm",...p.value},onClick:()=>{h(b)}})}))}else if(e.thumbnails===!0){const B=e.controlColor!==void 0?` text-${e.controlColor}`:"";S.push(I("thumbnails",H=>{const u=H.props;return F("img",{key:"tmb#"+u.name,class:`q-carousel__thumbnail q-carousel__thumbnail--${u.name===e.modelValue?"":"in"}active`+B,src:u.imgSrc||u["img-src"],onClick:()=>{h(u.name)}})}))}return e.arrows===!0&&w.value>=0&&((e.infinite===!0||w.value>0)&&S.push(F("div",{key:"prev",class:`q-carousel__control q-carousel__arrow q-carousel__prev-arrow q-carousel__prev-arrow--${k.value} absolute flex flex-center`},[F(ee,{icon:d.value[0],...p.value,onClick:f})])),(e.infinite===!0||w.value<o-1)&&S.push(F("div",{key:"next",class:`q-carousel__control q-carousel__arrow q-carousel__next-arrow q-carousel__next-arrow--${k.value} absolute flex flex-center`},[F(ee,{icon:d.value[1],...p.value,onClick:_})]))),Qt(t.control,S)}return()=>(o=a(t),F("div",{class:U.value,style:g.value},[jt("div",{class:"q-carousel__slides-container"},i(),"sl-cont",e.swipeable,()=>l.value)].concat(x())))}});function se(e,t,n,r){const s=[];return e.forEach(o=>{r(o)===!0?s.push(o):t.push({failedPropValidation:n,file:o})}),s}function be(e){e&&e.dataTransfer&&(e.dataTransfer.dropEffect="copy"),fe(e)}const On={multiple:Boolean,accept:String,capture:String,maxFileSize:[Number,String],maxTotalSize:[Number,String],maxFiles:[Number,String],filter:Function},Dn=["rejected"];function Nn({editable:e,dnd:t,getFileInput:n,addFilesToQueue:r}){const{props:s,emit:o,proxy:a}=me(),i=A(null),l=P(()=>s.accept!==void 0?s.accept.split(",").map(d=>(d=d.trim(),d==="*"?"*/":(d.endsWith("/*")&&(d=d.slice(0,d.length-1)),d.toUpperCase()))):null),h=P(()=>parseInt(s.maxFiles,10)),f=P(()=>parseInt(s.maxTotalSize,10));function _(d){if(e.value)if(d!==Object(d)&&(d={target:null}),d.target!==null&&d.target.matches('input[type="file"]')===!0)d.clientX===0&&d.clientY===0&&Xt(d);else{const y=n();y&&y!==d.target&&y.click(d)}}function v(d){e.value&&d&&r(null,d)}function w(d,y,m,$){let p=Array.from(y||d.target.files);const T=[],I=()=>{T.length>0&&o("rejected",T)};if(s.accept!==void 0&&l.value.indexOf("*/")===-1&&(p=se(p,T,"accept",x=>l.value.some(S=>x.type.toUpperCase().startsWith(S)||x.name.toUpperCase().endsWith(S))),p.length===0))return I();if(s.maxFileSize!==void 0){const x=parseInt(s.maxFileSize,10);if(p=se(p,T,"max-file-size",S=>S.size<=x),p.length===0)return I()}if(s.multiple!==!0&&p.length>0&&(p=[p[0]]),p.forEach(x=>{x.__key=x.webkitRelativePath+x.lastModified+x.name+x.size}),$===!0){const x=m.map(S=>S.__key);p=se(p,T,"duplicate",S=>x.includes(S.__key)===!1)}if(p.length===0)return I();if(s.maxTotalSize!==void 0){let x=$===!0?m.reduce((S,B)=>S+B.size,0):0;if(p=se(p,T,"max-total-size",S=>(x+=S.size,x<=f.value)),p.length===0)return I()}if(typeof s.filter=="function"){const x=s.filter(p);p=se(p,T,"filter",S=>x.includes(S))}if(s.maxFiles!==void 0){let x=$===!0?m.length:0;if(p=se(p,T,"max-files",()=>(x++,x<=h.value)),p.length===0)return I()}if(I(),p.length>0)return p}function C(d){be(d),t.value!==!0&&(t.value=!0)}function g(d){fe(d),(d.relatedTarget!==null||ae.is.safari!==!0?d.relatedTarget!==i.value:document.elementsFromPoint(d.clientX,d.clientY).includes(i.value)===!1)===!0&&(t.value=!1)}function k(d){be(d);const y=d.dataTransfer.files;y.length>0&&r(null,y),t.value=!1}function U(d){if(t.value===!0)return F("div",{ref:i,class:`q-${d}__dnd absolute-full`,onDragenter:be,onDragover:be,onDragleave:g,onDrop:k})}return Object.assign(a,{pickFiles:_,addFiles:v}),{pickFiles:_,addFiles:v,onDragover:C,onDragleave:g,processFiles:w,getDndNode:U,maxFilesNumber:h,maxTotalSizeNumber:f}}var Mn=De({name:"QFile",inheritAttrs:!1,props:{...Wt,...Gt,...On,modelValue:[File,FileList,Array],append:Boolean,useChips:Boolean,displayValue:[String,Number],tabindex:{type:[String,Number],default:0},counterLabel:Function,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]},emits:[...Kt,...Dn],setup(e,{slots:t,emit:n,attrs:r}){const{proxy:s}=me(),o=Yt(),a=A(null),i=A(!1),l=Zt(e),{pickFiles:h,onDragover:f,onDragleave:_,processFiles:v,getDndNode:w}=Nn({editable:o.editable,dnd:i,getFileInput:H,addFilesToQueue:u}),C=Jt(e),g=P(()=>Object(e.modelValue)===e.modelValue?"length"in e.modelValue?Array.from(e.modelValue):[e.modelValue]:[]),k=P(()=>We(g.value)),U=P(()=>g.value.map(R=>R.name).join(", ")),d=P(()=>kn(g.value.reduce((R,z)=>R+z.size,0))),y=P(()=>({totalSize:d.value,filesNumber:g.value.length,maxFiles:e.maxFiles})),m=P(()=>({tabindex:-1,type:"file",title:"",accept:e.accept,capture:e.capture,name:l.value,...r,id:o.targetUid.value,disabled:o.editable.value!==!0})),$=P(()=>"q-file q-field--auto-height"+(i.value===!0?" q-file--dnd":"")),p=P(()=>e.multiple===!0&&e.append===!0);function T(R){const z=g.value.slice();z.splice(R,1),x(z)}function I(R){const z=g.value.findIndex(R);z>-1&&T(z)}function x(R){n("update:modelValue",e.multiple===!0?R:R[0])}function S(R){R.keyCode===13&&nn(R)}function B(R){(R.keyCode===13||R.keyCode===32)&&h(R)}function H(){return a.value}function u(R,z){const Q=v(R,z,g.value,p.value),Pe=H();Pe!=null&&(Pe.value=""),Q!==void 0&&((e.multiple===!0?e.modelValue&&Q.every(Et=>g.value.includes(Et)):e.modelValue===Q[0])||x(p.value===!0?g.value.concat(Q):Q))}function c(){return[F("input",{class:[e.inputClass,"q-file__filler"],style:e.inputStyle})]}function b(){if(t.file!==void 0)return g.value.length===0?c():g.value.map((z,Q)=>t.file({index:Q,file:z,ref:this}));if(t.selected!==void 0)return g.value.length===0?c():t.selected({files:g.value,ref:this});if(e.useChips===!0)return g.value.length===0?c():g.value.map((z,Q)=>F(vn,{key:"file-"+Q,removable:o.editable.value,dense:!0,textColor:e.color,tabindex:e.tabindex,onRemove:()=>{T(Q)}},()=>F("span",{class:"ellipsis",textContent:z.name})));const R=e.displayValue!==void 0?e.displayValue:U.value;return R.length>0?[F("div",{class:e.inputClass,style:e.inputStyle,textContent:R})]:c()}function O(){const R={ref:a,...m.value,...C.value,class:"q-field__input fit absolute-full cursor-pointer",onChange:u};return e.multiple===!0&&(R.multiple=!0),F("input",R)}return Object.assign(o,{fieldClass:$,emitValue:x,hasValue:k,inputRef:a,innerValue:g,floatingLabel:P(()=>k.value===!0||We(e.displayValue)),computedCounter:P(()=>{if(e.counterLabel!==void 0)return e.counterLabel(y.value);const R=e.maxFiles;return`${g.value.length}${R!==void 0?" / "+R:""} (${d.value})`}),getControlChild:()=>w("file"),getControl:()=>{const R={ref:o.targetRef,class:"q-field__native row items-center cursor-pointer",tabindex:e.tabindex};return o.editable.value===!0&&Object.assign(R,{onDragover:f,onDragleave:_,onKeydown:S,onKeyup:B}),F("div",R,[O()].concat(b()))}}),Object.assign(s,{removeAtIndex:T,removeFile:I,getNativeElement:()=>a.value}),en(s,"nativeEl",()=>a.value),tn(o)}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="firebasestorage.googleapis.com",ft="storageBucket",Bn=2*60*1e3,zn=10*60*1e3,Vn=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E extends cn{constructor(t,n,r=0){super(Ie(t),`Firebase Storage: ${n} (${Ie(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,E.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Ie(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function Ie(e){return"storage/"+e}function Be(){const e="An unknown error occurred, please check the error payload for server response.";return new E("unknown",e)}function Ln(e){return new E("object-not-found","Object '"+e+"' does not exist.")}function jn(e){return new E("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Hn(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new E("unauthenticated",e)}function Qn(){return new E("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function Xn(e){return new E("unauthorized","User does not have permission to access '"+e+"'.")}function pt(){return new E("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function mt(){return new E("canceled","User canceled the upload/download.")}function Wn(e){return new E("invalid-url","Invalid URL '"+e+"'.")}function Gn(e){return new E("invalid-default-bucket","Invalid default bucket '"+e+"'.")}function Kn(){return new E("no-default-bucket","No default bucket found. Did you set the '"+ft+"' property when initializing the app?")}function gt(){return new E("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Yn(){return new E("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function Zn(){return new E("no-download-url","The given file does not have any download URLs.")}function Jn(e){return new E("unsupported-environment",`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function $e(e){return new E("invalid-argument",e)}function _t(){return new E("app-deleted","The Firebase app was deleted.")}function er(e){return new E("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function pe(e,t){return new E("invalid-format","String does not match format '"+e+"': "+t)}function de(e){throw new E("internal-error","Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=V.makeFromUrl(t,n)}catch{return new V(t,"")}if(r.path==="")return r;throw Gn(t)}static makeFromUrl(t,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function o(m){m.path.charAt(m.path.length-1)==="/"&&(m.path_=m.path_.slice(0,-1))}const a="(/(.*))?$",i=new RegExp("^gs://"+s+a,"i"),l={bucket:1,path:3};function h(m){m.path_=decodeURIComponent(m.path)}const f="v[A-Za-z0-9_]+",_=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",w=new RegExp(`^https?://${_}/${f}/b/${s}/o${v}`,"i"),C={bucket:1,path:3},g=n===ht?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",U=new RegExp(`^https?://${g}/${s}/${k}`,"i"),y=[{regex:i,indices:l,postModify:o},{regex:w,indices:C,postModify:h},{regex:U,indices:{bucket:1,path:2},postModify:h}];for(let m=0;m<y.length;m++){const $=y[m],p=$.regex.exec(t);if(p){const T=p[$.indices.bucket];let I=p[$.indices.path];I||(I=""),r=new V(T,I),$.postModify(r);break}}if(r==null)throw Wn(t);return r}}class tr{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(e,t,n){let r=1,s=null,o=null,a=!1,i=0;function l(){return i===2}let h=!1;function f(...k){h||(h=!0,t.apply(null,k))}function _(k){s=setTimeout(()=>{s=null,e(w,l())},k)}function v(){o&&clearTimeout(o)}function w(k,...U){if(h){v();return}if(k){v(),f.call(null,k,...U);return}if(l()||a){v(),f.call(null,k,...U);return}r<64&&(r*=2);let y;i===1?(i=2,y=0):y=(r+Math.random())*1e3,_(y)}let C=!1;function g(k){C||(C=!0,v(),!h&&(s!==null?(k||(i=2),clearTimeout(s),_(0)):k||(i=1)))}return _(0),o=setTimeout(()=>{a=!0,g(!0)},n),g}function rr(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(e){return e!==void 0}function or(e){return typeof e=="function"}function ar(e){return typeof e=="object"&&!Array.isArray(e)}function xe(e){return typeof e=="string"||e instanceof String}function rt(e){return ze()&&e instanceof Blob}function ze(){return typeof Blob!="undefined"&&!hn()}function st(e,t,n,r){if(r<t)throw $e(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw $e(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function vt(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const s=t(r)+"="+t(e[r]);n=n+s+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(te||(te={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bt(e,t){const n=e>=500&&e<600,s=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return n||s||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir{constructor(t,n,r,s,o,a,i,l,h,f,_,v=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=i,this.errorCallback_=l,this.timeout_=h,this.progressCallback_=f,this.connectionFactory_=_,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,C)=>{this.resolve_=w,this.reject_=C,this.start_()})}start_(){const t=(r,s)=>{if(s){r(!1,new ye(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const a=i=>{const l=i.loaded,h=i.lengthComputable?i.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,h)};this.progressCallback_!==null&&o.addUploadProgressListener(a),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(a),this.pendingConnection_=null;const i=o.getErrorCode()===te.NO_ERROR,l=o.getStatus();if((!i||bt(l,this.additionalRetryCodes_))&&this.retry){const f=o.getErrorCode()===te.ABORT;r(!1,new ye(!1,null,f));return}const h=this.successCodes_.indexOf(l)!==-1;r(!0,new ye(h,o))})},n=(r,s)=>{const o=this.resolve_,a=this.reject_,i=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(i,i.getResponse());sr(l)?o(l):o()}catch(l){a(l)}else if(i!==null){const l=Be();l.serverResponse=i.getErrorText(),this.errorCallback_?a(this.errorCallback_(i,l)):a(l)}else if(s.canceled){const l=this.appDelete_?_t():mt();a(l)}else{const l=pt();a(l)}};this.canceled_?n(!1,new ye(!1,null,!0)):this.backoffId_=nr(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&rr(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ye{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function lr(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function ur(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t!=null?t:"AppManager")}function cr(e,t){t&&(e["X-Firebase-GMPID"]=t)}function dr(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function hr(e,t,n,r,s,o,a=!0){const i=vt(e.urlParams),l=e.url+i,h=Object.assign({},e.headers);return cr(h,t),lr(h,n),ur(h,o),dr(h,r),new ir(l,e.method,h,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function pr(...e){const t=fr();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(ze())return new Blob(e);throw new E("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function mr(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(e){if(typeof atob=="undefined")throw Jn("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qe{constructor(t,n){this.data=t,this.contentType=n||null}}function _r(e,t){switch(e){case X.RAW:return new qe(yt(t));case X.BASE64:case X.BASE64URL:return new qe(wt(e,t));case X.DATA_URL:return new qe(br(t),yr(t))}throw Be()}function yt(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const o=r,a=e.charCodeAt(++n);r=65536|(o&1023)<<10|a&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function vr(e){let t;try{t=decodeURIComponent(e)}catch{throw pe(X.DATA_URL,"Malformed data URL.")}return yt(t)}function wt(e,t){switch(e){case X.BASE64:{const s=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(s||o)throw pe(e,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case X.BASE64URL:{const s=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(s||o)throw pe(e,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=gr(t)}catch(s){throw s.message.includes("polyfill")?s:pe(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class kt{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw pe(X.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=wr(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function br(e){const t=new kt(e);return t.base64?wt(X.BASE64,t.rest):vr(t.rest)}function yr(e){return new kt(e).contentType}function wr(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(t,n){let r=0,s="";rt(t)?(this.data_=t,r=t.size,s=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(t,n){if(rt(this.data_)){const r=this.data_,s=mr(r,t,n);return s===null?null:new G(s)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new G(r,!0)}}static getBlob(...t){if(ze()){const n=t.map(r=>r instanceof G?r.data_:r);return new G(pr.apply(null,n))}else{const n=t.map(a=>xe(a)?_r(X.RAW,a).data:a.data_);let r=0;n.forEach(a=>{r+=a.byteLength});const s=new Uint8Array(r);let o=0;return n.forEach(a=>{for(let i=0;i<a.length;i++)s[o++]=a[i]}),new G(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(e){let t;try{t=JSON.parse(e)}catch{return null}return ar(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Sr(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function xt(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(e,t){return t}class D{constructor(t,n,r,s){this.server=t,this.local=n||t,this.writable=!!r,this.xform=s||xr}}let we=null;function Cr(e){return!xe(e)||e.length<2?e:xt(e)}function Ve(){if(we)return we;const e=[];e.push(new D("bucket")),e.push(new D("generation")),e.push(new D("metageneration")),e.push(new D("name","fullPath",!0));function t(o,a){return Cr(a)}const n=new D("name");n.xform=t,e.push(n);function r(o,a){return a!==void 0?Number(a):a}const s=new D("size");return s.xform=r,e.push(s),e.push(new D("timeCreated")),e.push(new D("updated")),e.push(new D("md5Hash",null,!0)),e.push(new D("cacheControl",null,!0)),e.push(new D("contentDisposition",null,!0)),e.push(new D("contentEncoding",null,!0)),e.push(new D("contentLanguage",null,!0)),e.push(new D("contentType",null,!0)),e.push(new D("metadata","customMetadata",!0)),we=e,we}function Rr(e,t){function n(){const r=e.bucket,s=e.fullPath,o=new V(r,s);return t._makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function Pr(e,t,n){const r={};r.type="file";const s=n.length;for(let o=0;o<s;o++){const a=n[o];r[a.local]=a.xform(r,t[a.server])}return Rr(r,e),r}function Ct(e,t,n){const r=St(t);return r===null?null:Pr(e,r,n)}function Tr(e,t,n,r){const s=St(t);if(s===null||!xe(s.downloadTokens))return null;const o=s.downloadTokens;if(o.length===0)return null;const a=encodeURIComponent;return o.split(",").map(h=>{const f=e.bucket,_=e.fullPath,v="/b/"+a(f)+"/o/"+a(_),w=re(v,n,r),C=vt({alt:"media",token:h});return w+C})[0]}function Le(e,t){const n={},r=t.length;for(let s=0;s<r;s++){const o=t[s];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}class Y{constructor(t,n,r,s){this.url=t,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(e){if(!e)throw Be()}function Ce(e,t){function n(r,s){const o=Ct(e,s,t);return W(o!==null),o}return n}function Ur(e,t){function n(r,s){const o=Ct(e,s,t);return W(o!==null),Tr(o,s,e.host,e._protocol)}return n}function ge(e){function t(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=Qn():s=Hn():n.getStatus()===402?s=jn(e.bucket):n.getStatus()===403?s=Xn(e.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return t}function Re(e){const t=ge(e);function n(r,s){let o=t(r,s);return r.getStatus()===404&&(o=Ln(e.path)),o.serverResponse=s.serverResponse,o}return n}function Er(e,t,n){const r=t.fullServerUrl(),s=re(r,e.host,e._protocol),o="GET",a=e.maxOperationRetryTime,i=new Y(s,o,Ce(e,n),a);return i.errorHandler=Re(t),i}function Ir(e,t,n){const r=t.fullServerUrl(),s=re(r,e.host,e._protocol),o="GET",a=e.maxOperationRetryTime,i=new Y(s,o,Ur(e,n),a);return i.errorHandler=Re(t),i}function qr(e,t,n,r){const s=t.fullServerUrl(),o=re(s,e.host,e._protocol),a="PATCH",i=Le(n,r),l={"Content-Type":"application/json; charset=utf-8"},h=e.maxOperationRetryTime,f=new Y(o,a,Ce(e,r),h);return f.headers=l,f.body=i,f.errorHandler=Re(t),f}function Fr(e,t){const n=t.fullServerUrl(),r=re(n,e.host,e._protocol),s="DELETE",o=e.maxOperationRetryTime;function a(l,h){}const i=new Y(r,s,a,o);return i.successCodes=[200,204],i.errorHandler=Re(t),i}function Ar(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Rt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=Ar(null,t)),r}function $r(e,t,n,r,s){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};function i(){let y="";for(let m=0;m<2;m++)y=y+Math.random().toString().slice(2);return y}const l=i();a["Content-Type"]="multipart/related; boundary="+l;const h=Rt(t,r,s),f=Le(h,n),_="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+l+`\r
Content-Type: `+h.contentType+`\r
\r
`,v=`\r
--`+l+"--",w=G.getBlob(_,r,v);if(w===null)throw gt();const C={name:h.fullPath},g=re(o,e.host,e._protocol),k="POST",U=e.maxUploadRetryTime,d=new Y(g,k,Ce(e,n),U);return d.urlParams=C,d.headers=a,d.body=w.uploadData(),d.errorHandler=ge(t),d}class Se{constructor(t,n,r,s){this.current=t,this.total=n,this.finalized=!!r,this.metadata=s||null}}function je(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch{W(!1)}return W(!!n&&(t||["active"]).indexOf(n)!==-1),n}function Or(e,t,n,r,s){const o=t.bucketOnlyServerUrl(),a=Rt(t,r,s),i={name:a.fullPath},l=re(o,e.host,e._protocol),h="POST",f={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},_=Le(a,n),v=e.maxUploadRetryTime;function w(g){je(g);let k;try{k=g.getResponseHeader("X-Goog-Upload-URL")}catch{W(!1)}return W(xe(k)),k}const C=new Y(l,h,w,v);return C.urlParams=i,C.headers=f,C.body=_,C.errorHandler=ge(t),C}function Dr(e,t,n,r){const s={"X-Goog-Upload-Command":"query"};function o(h){const f=je(h,["active","final"]);let _=null;try{_=h.getResponseHeader("X-Goog-Upload-Size-Received")}catch{W(!1)}_||W(!1);const v=Number(_);return W(!isNaN(v)),new Se(v,r.size(),f==="final")}const a="POST",i=e.maxUploadRetryTime,l=new Y(n,a,o,i);return l.headers=s,l.errorHandler=ge(t),l}const ot=256*1024;function Nr(e,t,n,r,s,o,a,i){const l=new Se(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw Yn();const h=l.total-l.current;let f=h;s>0&&(f=Math.min(f,s));const _=l.current,v=_+f;let w="";f===0?w="finalize":h===f?w="upload, finalize":w="upload";const C={"X-Goog-Upload-Command":w,"X-Goog-Upload-Offset":`${l.current}`},g=r.slice(_,v);if(g===null)throw gt();function k(m,$){const p=je(m,["active","final"]),T=l.current+f,I=r.size();let x;return p==="final"?x=Ce(t,o)(m,$):x=null,new Se(T,I,p==="final",x)}const U="POST",d=t.maxUploadRetryTime,y=new Y(n,U,k,d);return y.headers=C,y.body=g.uploadData(),y.progressCallback=i||null,y.errorHandler=ge(e),y}const M={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Fe(e){switch(e){case"running":case"pausing":case"canceling":return M.RUNNING;case"paused":return M.PAUSED;case"success":return M.SUCCESS;case"canceled":return M.CANCELED;case"error":return M.ERROR;default:return M.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr{constructor(t,n,r){if(or(t)||n!=null||r!=null)this.next=t,this.error=n!=null?n:void 0,this.complete=r!=null?r:void 0;else{const o=t;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oe(e){return(...t)=>{Promise.resolve().then(()=>e(...t))}}class Br{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=te.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=te.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=te.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,s){if(this.sent_)throw de("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw de("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw de("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw de("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw de("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class zr extends Br{initXhr(){this.xhr_.responseType="text"}}function K(){return new zr}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(t,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=r,this._mappings=Ve(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(bt(s.status,[]))if(o)s=pt();else{this.sleepTime=Math.max(this.sleepTime*2,Vn),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,o)=>{this._resolve=s,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const t=this._transferred;return n=>this._updateProgress(t+n)}_shouldDoResumable(t){return t.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(t){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":t(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((t,n)=>{const r=Or(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,K,t,n);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const t=this._uploadUrl;this._resolveToken((n,r)=>{const s=Dr(this._ref.storage,this._ref._location,t,this._blob),o=this._ref.storage._makeRequest(s,K,n,r);this._request=o,o.getPromise().then(a=>{a=a,this._request=void 0,this._updateProgress(a.current),this._needToFetchStatus=!1,a.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const t=ot*this._chunkMultiplier,n=new Se(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,o)=>{let a;try{a=Nr(this._ref._location,this._ref.storage,r,this._blob,t,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const i=this._ref.storage._makeRequest(a,K,s,o,!1);this._request=i,i.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){ot*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((t,n)=>{const r=Er(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,K,t,n);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((t,n)=>{const r=$r(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,K,t,n);this._request=s,s.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(t){const n=this._transferred;this._transferred=t,this._transferred!==n&&this._notifyObservers()}_transition(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=t,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=mt(),this._state=t,this._notifyObservers();break;case"error":this._state=t,this._notifyObservers();break;case"success":this._state=t,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const t=Fe(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}}on(t,n,r,s){const o=new Mr(n||void 0,r||void 0,s||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(t,n){return this._promise.then(t,n)}catch(t){return this.then(null,t)}_addObserver(t){this._observers.push(t),this._notifyObserver(t)}_removeObserver(t){const n=this._observers.indexOf(t);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let t=!0;switch(Fe(this._state)){case M.SUCCESS:oe(this._resolve.bind(null,this.snapshot))();break;case M.CANCELED:case M.ERROR:const n=this._reject;oe(n.bind(null,this._error))();break;default:t=!1;break}t&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(t){switch(Fe(this._state)){case M.RUNNING:case M.PAUSED:t.next&&oe(t.next.bind(t,this.snapshot))();break;case M.SUCCESS:t.complete&&oe(t.complete.bind(t))();break;case M.CANCELED:case M.ERROR:t.error&&oe(t.error.bind(t,this._error))();break;default:t.error&&oe(t.error.bind(t,this._error))()}}resume(){const t=this._state==="paused"||this._state==="pausing";return t&&this._transition("running"),t}pause(){const t=this._state==="running";return t&&this._transition("pausing"),t}cancel(){const t=this._state==="running"||this._state==="pausing";return t&&this._transition("canceling"),t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(t,n){this._service=t,n instanceof V?this._location=n:this._location=V.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new ne(t,n)}get root(){const t=new V(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return xt(this._location.path)}get storage(){return this._service}get parent(){const t=kr(this._location.path);if(t===null)return null;const n=new V(this._location.bucket,t);return new ne(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw er(t)}}function Lr(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Vr(e,new G(t),n)}function jr(e,t){e._throwIfRoot("updateMetadata");const n=qr(e.storage,e._location,t,Ve());return e.storage.makeRequestWithTokens(n,K)}function Hr(e){e._throwIfRoot("getDownloadURL");const t=Ir(e.storage,e._location,Ve());return e.storage.makeRequestWithTokens(t,K).then(n=>{if(n===null)throw Zn();return n})}function Qr(e){e._throwIfRoot("deleteObject");const t=Fr(e.storage,e._location);return e.storage.makeRequestWithTokens(t,K)}function Xr(e,t){const n=Sr(e._location.path,t),r=new V(e._location.bucket,n);return new ne(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wr(e){return/^[A-Za-z]+:\/\//.test(e)}function Gr(e,t){return new ne(e,t)}function Pt(e,t){if(e instanceof He){const n=e;if(n._bucket==null)throw Kn();const r=new ne(n,n._bucket);return t!=null?Pt(r,t):r}else return t!==void 0?Xr(e,t):e}function Kr(e,t){if(t&&Wr(t)){if(e instanceof He)return Gr(e,t);throw $e("To use ref(service, url), the first argument must be a Storage instance.")}else return Pt(e,t)}function at(e,t){const n=t==null?void 0:t[ft];return n==null?null:V.makeFromBucketSpec(n,e)}function Yr(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken=typeof s=="string"?s:dn(s,e.app.options.projectId))}class He{constructor(t,n,r,s,o){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=o,this._bucket=null,this._host=ht,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Bn,this._maxUploadRetryTime=zn,this._requests=new Set,s!=null?this._bucket=V.makeFromBucketSpec(s,this._host):this._bucket=at(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=V.makeFromBucketSpec(this._url,t):this._bucket=at(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){st("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){st("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new ne(this,t)}_makeRequest(t,n,r,s,o=!0){if(this._deleted)return new tr(_t());{const a=hr(t,this._appId,r,s,n,this._firebaseVersion,o);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(t,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,s).getPromise()}}const it="@firebase/storage",lt="0.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt="storage";function Zr(e,t,n){return e=le(e),Lr(e,t,n)}function Ae(e,t){return e=le(e),jr(e,t)}function Jr(e){return e=le(e),Hr(e)}function es(e){return e=le(e),Qr(e)}function ke(e,t){return e=le(e),Kr(e,t)}function ts(e=un(),t){e=le(e);const r=an(e,Tt).getImmediate({identifier:t}),s=ln("storage");return s&&ns(r,...s),r}function ns(e,t,n,r={}){Yr(e,t,n,r)}function rs(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return new He(n,r,s,t,on)}function ss(){rn(new sn(Tt,rs,"PUBLIC").setMultipleInstances(!0)),Ge(it,lt,""),Ge(it,lt,"esm2017")}ss();function Ut(){const e=ts(fn);async function t(o,a){try{if(o!=null){const i={customMetadata:{isMain:!1,uid:o.uid,extension:o.extension,storageRef:o.storageRef,url:o.url}},l=ke(e,o.storageRef);let h=await Ae(l,i)}else{const i={customMetadata:{isMain:!0,uid:a.uid,extension:a.extension,storageRef:a.storageRef,url:a.url}},l=ke(e,a.storageRef);return{...(await Ae(l,i)).customMetadata}}}catch(i){console.warn({error:i})}}async function n(o){try{const a=o.map(async i=>{const l=i.name.slice(i.name.lastIndexOf(".")),h=s(),f=`images/${h}${l}`,_=ke(e,f);return await Zr(_,i),{...(await Ae(_,{customMetadata:{isMain:!1,uid:h,extension:l,storageRef:f}})).customMetadata,url:await Jr(_)}});return Promise.all(a)}catch(a){console.warn({error:a})}}async function r(o){try{const a=ke(e,o.storageRef);await es(a)}catch(a){console.warn({error:a})}}function s(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,o=>(o^crypto.getRandomValues(new Uint8Array(1))[0]&15>>o/4).toString(16))}return{updateMainImageInFirebase:t,uploadImagesToFirebaseStorage:n,generateUniqueImageId:s,removeImageFromFirebaseStorage:r}}const os={class:""},as={__name:"FirebaseUpload",emits:["onImagesUploaded"],setup(e,{emit:t}){Me();const{triggerSpinner:n}=dt(),{uploadImagesToFirebaseStorage:r}=Ut(),s=A([]),o=A(null),a=P(()=>o.value!==null),i=async()=>{try{const l=n("loading images...");s.value=[],s.value=await r(o.value),s.value&&l(),t("onImagesUploaded",s.value),o.value=null}catch(l){console.warn({error:l})}};return(l,h)=>(L(),he("div",os,[N(Mn,{modelValue:o.value,"onUpdate:modelValue":h[0]||(h[0]=f=>o.value=f),label:"Add images to upload",class:"q-pt-md",accept:".jpg, image/*",outlined:"",counter:"",clearable:"",multiple:"",append:"","use-chips":""},pn({prepend:J(()=>[N(ct,{name:"attach_file"})]),_:2},[q(a)?{name:"after",fn:J(()=>[N(ee,{color:"green",rounded:"",dense:"",icon:"cloud_upload",disable:!q(a),onClick:i},null,8,["disable"])]),key:"0"}:void 0]),1032,["modelValue"])]))}};const is={class:"row justify-center"},ls={class:"col-12 col-sm-6 col-md-4"},us={class:"q-pa-md"},cs={key:1},ds={class:"col-12 col-sm-6 col-md-4"},hs={class:"q-pa-md"},fs={key:0,class:"custom-caption absolute-top"},ps=Z("div",{class:"text-h2"},"Main Image",-1),ms=[ps],gs=Z("div",{class:"q-mt-md text-center"}," Add product images below ",-1),_s={key:0,class:"row q-gutter-sm q-pt-md"},vs={__name:"ProductEditor",setup(e){Me();const{getCategoryDocsFromFirebase:t,getSubcategoryDocsFromFirebase:n,createProductInFirebase:r}=bn(),{updateMainImageInFirebase:s,removeImageFromFirebaseStorage:o}=Ut(),{triggerNegative:a,triggerPositive:i}=dt(),l=A([]),h=A([]),f=A([]),_=A([]),v=A(null),w=A(null),C=A(""),g=A("blank"),k=A(null),U=A(!1),d=A([]),y=A([]),m=mn({productName:"",productPrice:"",productQuantity:"",productCategory:"",productSubCategory:"",productDescription:""}),$={productName:{required:ue,$lazy:!0},productPrice:{required:ue,integer:Ye,minValue:Ze(1),$lazy:!0},productQuantity:{required:ue,integer:Ye,minValue:Ze(1),$lazy:!0},productCategory:{required:ue,$lazy:!0},productSubCategory:{$lazy:!1},productDescription:{required:ue,$lazy:!0}},p=yn($,m),T=async()=>{try{if(!await q(p).$validate())a("Fill in all the fields");else if(d.value.length==0)a("Please upload product images");else if(!k.value)a("Please select a main image");else{const c={name:m.productName,price:m.productPrice,quantity:m.productQuantity,category:v.value,subCategory:w.value,description:m.productDescription,imagesData:d.value,imageUrls:y.value};await r(c),i(`Product ${c.name} created`),H()}}catch(u){console.warn({error:u})}};j(g,u=>{const c=d.value.find(b=>b.url==u);c&&c.isMain=="true"?U.value=!0:U.value=!1}),Ne(async()=>{try{const{categoriesData:u}=await t();l.value=u.value}catch(u){console.warn({error:u})}}),j(l,()=>{h.value=l.value.map(u=>({label:u.categoryName,value:u.categoryId}))}),j(w,u=>{try{if(u)m.productSubCategory=u;else{m.productSubCategory="";return}}catch(c){console.warn({error:c})}m.productSubCategory=u}),j(v,async u=>{try{if(u)m.productCategory=u;else{m.productCategory="",_.value=[];return}_.value=[],w.value="";const{subcategoriesData:c}=await n(u);f.value=c.value}catch(c){console.error({error:c})}}),j(f,u=>{_.value=u.map(c=>({label:c.subCategoryName,value:c.subCategoryId}))});const I=async()=>{const u=[];d.value.forEach(O=>{O.url!=g.value&&u.push(O)});let c=d.value.find(O=>O.url==g.value),b=d.value.indexOf(c);await o(c),d.value=u,y.value=[],d.value.forEach(O=>{y.value.push(O.url)}),b==0?g.value=d.value[0].url:g.value=d.value[b-1].url},x=async()=>{S();let u=d.value.find(O=>O.url==g.value),c=d.value.indexOf(u),b=await s(k.value,u);d.value[c]=b,U.value=!0,k.value=b},S=()=>{let u=d.value.find(c=>c.isMain=="true");if(u){u.isMain=!1;let c=d.value.indexOf(u);d.value[c]=u}},B=u=>{u.forEach(b=>{d.value.push(b),y.value.push(b.url)}),g.value=d.value[0].url;let c=d.value.find(b=>b.isMain==!0);c&&(k.value=c)},H=()=>{m.productName="",m.productPrice="",m.productQuantity="",m.productCategory="",m.productSubCategory="",m.productDescription="",v.value=null,w.value=null,g.value="blank",k.value=null,U.value=!1,d.value=[],y.value=[],q(p).$reset()};return(u,c)=>(L(),ie(It,{ref_key:"createProductForm",ref:C,onSubmit:T},{default:J(()=>[Z("div",is,[Z("div",ls,[Z("div",us,[N(ve,{outlined:"",label:"Product name",class:"q-pb-lg",modelValue:m.productName,"onUpdate:modelValue":c[0]||(c[0]=b=>m.productName=b),"error-message":"Product name is required","bottom-slots":"",error:q(p).productName.$invalid&&q(p).productName.$dirty,"onUpdate:model":c[1]||(c[1]=b=>q(p).productName.$touch())},null,8,["modelValue","error"]),N(ve,{outlined:"",label:"Product price",class:"q-pb-lg",modelValue:m.productPrice,"onUpdate:modelValue":[c[2]||(c[2]=b=>m.productPrice=b),c[3]||(c[3]=b=>q(p).productPrice.$touch())],"error-message":"Please enter valid price","bottom-slots":"",error:q(p).productPrice.$invalid&&q(p).productPrice.$dirty},null,8,["modelValue","error"]),N(ve,{class:"q-pb-lg",label:"Product quantity",modelValue:m.productQuantity,"onUpdate:modelValue":[c[4]||(c[4]=b=>m.productQuantity=b),c[5]||(c[5]=b=>q(p).productQuantity.$touch())],"error-message":"Please enter valid quantity",outlined:"","bottom-slots":"",error:q(p).productQuantity.$invalid&&q(p).productQuantity.$dirty},null,8,["modelValue","error"]),h.value.length?(L(),ie(Ke,{key:0,outlined:"",label:"Parent category",class:"q-pb-lg","error-message":"Please select a parent category",options:h.value,modelValue:v.value,"onUpdate:modelValue":[c[6]||(c[6]=b=>v.value=b),c[7]||(c[7]=b=>q(p).productCategory.$touch())],error:q(p).productCategory.$invalid&&q(p).productCategory.$dirty},null,8,["options","modelValue","error"])):(L(),he("p",cs,"No product categories")),_.value.length?(L(),ie(Ke,{key:2,outlined:"",label:"Product Subcategory",class:"q-pb-lg",modelValue:w.value,"onUpdate:modelValue":[c[8]||(c[8]=b=>w.value=b),c[9]||(c[9]=b=>q(p).productSubCategory.$touch())],options:_.value,"error-message":"Please select a subcategory",error:q(p).productSubCategory.$invalid&&q(p).productSubCategory.$dirty},null,8,["modelValue","options","error"])):Ee("",!0),N(ve,{filled:"",clearable:"",autogrow:"",type:"textarea",color:"primary",label:"Product Description",modelValue:m.productDescription,"onUpdate:modelValue":[c[10]||(c[10]=b=>m.productDescription=b),c[11]||(c[11]=b=>q(p).productDescription.$touch())],"error-message":"Please enter product description",error:q(p).productDescription.$invalid&&q(p).productDescription.$dirty},null,8,["modelValue","error"])])]),Z("div",ds,[Z("div",hs,[N($n,{modelValue:g.value,"onUpdate:modelValue":c[12]||(c[12]=b=>g.value=b),"transition-prev":"jump-right","transition-next":"jump-left",animated:"","control-color":"white","prev-icon":"arrow_left","next-icon":"arrow_right",thumbnails:y.value.length!=0,infinite:"",height:"300px",class:"bg-primary text-white shadow-1 rounded-borders"},{default:J(()=>[y.value.length!=0?(L(!0),he(gn,{key:0},_n(y.value,(b,O)=>(L(),ie(nt,{name:b,"img-src":b},{default:J(()=>[U.value?(L(),he("div",fs,ms)):Ee("",!0)]),_:2},1032,["name","img-src"]))),256)):(L(),ie(nt,{key:1,name:"blank",class:"column no-wrap flex-center"},{default:J(()=>[N(ct,{name:"image",size:"56px"}),gs]),_:1}))]),_:1},8,["modelValue","thumbnails"]),y.value.length!=0?(L(),he("div",_s,[N(ee,{unelevated:"",rounded:"",align:"between","icon-right":"delete",color:"primary",label:"Remove",onClick:I}),N(ee,{unelevated:"",rounded:"",align:"between","icon-right":"image",color:"primary",label:"Set as main",onClick:x})])):Ee("",!0),N(as,{onOnImagesUploaded:B}),N(ee,{unelevated:"",rounded:"",align:"between","icon-right":"check",color:"primary",label:"create product",type:"submit"})])])])]),_:1},512))}};const xs={__name:"Products",setup(e){return Me(),(t,n)=>(L(),ie(qt,null,{default:J(()=>[N(vs)]),_:1}))}};export{xs as default};
